# HSV 실시간 객체 탐지

이 프로젝트는 MSS를 사용하여 화면을 캡처하고 HSV 색상 공간을 이용하여 실시간으로 객체를 탐지하는 프로그램입니다.

## 설치 방법

1. 필요한 패키지 설치:
```bash
pip install -r requirements.txt
```

## 사용 방법

1. 프로그램 실행:
```bash
python main.py
```

2. HSV 값 조정:
- 'HSV Control' 창의 슬라이더를 사용하여 탐지하고자 하는 객체의 HSV 범위를 조정합니다.
- H (Hue): 색상 (0-179)
- S (Saturation): 채도 (0-255)
- V (Value): 명도 (0-255)

3. 모니터링 모드:
- 실시간 모드: 화면을 실시간으로 캡처하여 객체 탐지
- 정적 이미지 모드: 버튼을 눌러 현재 화면을 캡처하고 그 이미지에서 객체 탐지

4. 모니터 화면:
- "Show Monitor" 버튼을 클릭하여 모니터링 화면을 표시
- 화면 설명:
  - 왼쪽: 원본 캡처 이미지
  - 중앙: HSV 마스크 이미지
  - 오른쪽: 감지된 객체가 표시된 이미지

5. 설정 저장 및 불러오기:
- "Save Settings" 버튼을 클릭하여 현재 HSV 설정을 저장
- "Load Settings" 버튼을 클릭하여 이전에 저장된 HSV 설정을 불러오기

## 프로젝트 특징

이 프로젝트는 일반적인 이미지 처리 애플리케이션과 달리, OpenCV나 PIL과 같은 표준 이미지 처리 라이브러리에 의존하지 않고 핵심 기능들을 직접 구현했습니다. 자체적인 이미지 처리 알고리즘과 HSV 변환 로직을 개발하여 외부 라이브러리의 의존성을 최소화하였습니다.

또한 JIT(Just-In-Time) 컴파일과 Numba 라이브러리를 활용하여 Python 코드를 최적화함으로써, OpenCV와 비슷한 수준의 실행 속도를 달성하였습니다. 이를 통해 라이브러리 의존성을 줄이면서도 실시간 이미지 처리에 필요한 성능을 확보했습니다.

이러한 접근 방식은 프로젝트의 독립성을 높이고 특정 환경에서의 호환성 문제를 줄여주며, 동시에 고성능의 이미지 처리를 가능하게 합니다.

## 주요 기능

1. 모니터 선택:
- 여러 모니터 중 캡처할 모니터를 선택 가능

2. HSV 색상 필터링:
- HSV 색상 공간에서 특정 범위의 색상을 필터링
- 슬라이더로 각 채널(H, S, V)의 최소/최대값 조정

3. 객체 검출:
- 색상 필터링된 영역에서 윤곽선 검출
- 최소 면적 이상의 객체만 탐지

4. 실시간/정적 모드:
- 실시간 모드: 지속적으로 화면을 캡처하여 객체 탐지
- 정적 이미지 모드: 캡처한 이미지에서 HSV 설정을 조정하며 객체 탐지

## 주요 색상의 HSV 값 범위 예시

1. 빨간색:
- H: 0-10 또는 170-179
- S: 100-255
- V: 100-255

2. 파란색:
- H: 100-130
- S: 100-255
- V: 100-255

3. 초록색:
- H: 40-80
- S: 100-255
- V: 100-255

## 프로젝트 구조

- `main.py`: 메인 프로그램 실행 파일
- `src/`: 소스 코드 디렉토리
  - `capture/`: 화면 캡처 관련 모듈
    - `screen_capture.py`: 화면 캡처 기능 구현
  - `detection/`: 객체 탐지 관련 모듈
    - `custom_detector.py`: HSV 기반 객체 탐지 구현
  - `ui/`: 사용자 인터페이스 관련 모듈
    - `control_window.py`: HSV 값 조정 및 제어 창
    - `monitor_window.py`: 탐지 결과 표시 창
- `hsv_settings.json`: HSV 설정 저장 파일
- `requirements.txt`: 필요 패키지 목록

## 주의사항
- 프로그램은 기본적으로 선택한 모니터의 중앙 영역을 캡처합니다.
- 객체 감지는 설정된 HSV 범위에 따라 수행됩니다.
- 노이즈 필터링을 위해 최소 면적이 설정되어 있습니다.
- 실제 환경과 조명 조건에 따라 HSV 값을 조정해야 할 수 있습니다.
- 종료 시에는 컨트롤 창의 닫기 버튼을 사용하세요.